<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面向对象 | lien的知识库</title>
    <meta name="description" content="Beta测试版（持续更新）">
    
    
    <link rel="preload" href="/Blog/assets/css/0.styles.a52f7505.css" as="style"><link rel="preload" href="/Blog/assets/js/app.617ab371.js" as="script"><link rel="preload" href="/Blog/assets/js/16.938c6039.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.46258761.js"><link rel="prefetch" href="/Blog/assets/js/11.ab0c356e.js"><link rel="prefetch" href="/Blog/assets/js/12.efa954c5.js"><link rel="prefetch" href="/Blog/assets/js/13.a51a3581.js"><link rel="prefetch" href="/Blog/assets/js/14.f3e24aec.js"><link rel="prefetch" href="/Blog/assets/js/15.7c12f477.js"><link rel="prefetch" href="/Blog/assets/js/17.edd1c09f.js"><link rel="prefetch" href="/Blog/assets/js/18.d246982e.js"><link rel="prefetch" href="/Blog/assets/js/19.e9897004.js"><link rel="prefetch" href="/Blog/assets/js/2.e0ac42ce.js"><link rel="prefetch" href="/Blog/assets/js/20.f4d07941.js"><link rel="prefetch" href="/Blog/assets/js/21.ab6a28d5.js"><link rel="prefetch" href="/Blog/assets/js/22.3c29c57b.js"><link rel="prefetch" href="/Blog/assets/js/23.9b60bf3f.js"><link rel="prefetch" href="/Blog/assets/js/24.ff06c3b1.js"><link rel="prefetch" href="/Blog/assets/js/25.a85604c2.js"><link rel="prefetch" href="/Blog/assets/js/3.87ff979b.js"><link rel="prefetch" href="/Blog/assets/js/4.b672c920.js"><link rel="prefetch" href="/Blog/assets/js/5.c20f3565.js"><link rel="prefetch" href="/Blog/assets/js/6.70f5392d.js"><link rel="prefetch" href="/Blog/assets/js/7.7bc891c0.js"><link rel="prefetch" href="/Blog/assets/js/8.8275099f.js"><link rel="prefetch" href="/Blog/assets/js/9.8cb6b872.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.a52f7505.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">lien的知识库</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">知识</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/knowledge/js/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/network/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/dataStructure/" class="nav-link">数据结构</a></li></ul></div></div><div class="nav-item"><a href="/Blog/work/" class="nav-link">工程</a></div><div class="nav-item"><a href="/Blog/essay/" class="nav-link">杂文</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/LienJack/Blog-dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">知识</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/knowledge/js/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/network/" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/Blog/knowledge/dataStructure/" class="nav-link">数据结构</a></li></ul></div></div><div class="nav-item"><a href="/Blog/work/" class="nav-link">工程</a></div><div class="nav-item"><a href="/Blog/essay/" class="nav-link">杂文</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/LienJack/Blog-dev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Blog/knowledge/js/" class="sidebar-link">首页</a></li><li><a href="/Blog/knowledge/js/1.type.html" class="sidebar-link">关于类型</a></li><li><a href="/Blog/knowledge/js/1.typeDetail.html" class="sidebar-link">类型详解（可不读）</a></li><li><a href="/Blog/knowledge/js/2.scope.html" class="sidebar-link">作用域</a></li><li><a href="/Blog/knowledge/js/3.this.html" class="sidebar-link">this</a></li><li><a href="/Blog/knowledge/js/4.oop.html" class="active sidebar-link">面向对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#入门小故事" class="sidebar-link">入门小故事</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#原型链" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#实例属性方法、静态属性方法、原型属性方法" class="sidebar-link">实例属性方法、静态属性方法、原型属性方法</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#new的本质" class="sidebar-link">New的本质</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#深拷贝继承" class="sidebar-link">深拷贝继承</a></li><li class="sidebar-sub-header"><a href="/Blog/knowledge/js/4.oop.html#总结-javascript万物起源" class="sidebar-link">总结 javascript万物起源</a></li></ul></li><li><a href="/Blog/knowledge/js/5.async.html" class="sidebar-link">异步</a></li><li><a href="/Blog/knowledge/js/nojquery.html" class="sidebar-link">原生替换jQuery方案列表</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="面向对象"><a href="#面向对象" aria-hidden="true" class="header-anchor">#</a> 面向对象</h1> <h2 id="入门小故事"><a href="#入门小故事" aria-hidden="true" class="header-anchor">#</a> 入门小故事</h2> <p>作者 码农翻身-老刘
<a href="https://mp.weixin.qq.com/s/l3feZ7NaV1pIJ52K5JCQEw" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h3> <p>作为Java 帝国的未来继承人，Java小王子受到了严格的教育， 不但精通Java语言、Java虚拟机、java类库和框架，还对各种官方的Java规范了如指掌。</p> <p>近日他听说一个叫做Javascript的屌丝逆袭了， 成功地建立了一个独立的王国， 不但成了前端编程之王， 还不断地蚕食Java帝国的领地 ！</p> <p>按照小王子宫廷老师的说法： 想当年， 这家伙只是运行在浏览器中，完完全全是蹭了Java的热度这才发展起来， 现在竟然回过头来要欺负我们， 还有没有天理了？ 是可忍孰不可忍？ ！</p> <p>小王子可不这么认为， 存在必然是合理的，javascrip必有独特之处， 俗话说知己知彼，百战不殆，他觉得有必要去Javascript王国刺探一下，搜集一下情报， 看看这个曾经的浏览器中的面向对象语言是怎么回事， 为什么那么多码农趋之若鹜。</p> <h3 id="初步印象"><a href="#初步印象" aria-hidden="true" class="header-anchor">#</a> 初步印象</h3> <p>乔装打扮以后，小王子来到Javascript 王国，这里看起来一派生气勃勃的景象，人们随性而奔放， 不像Java帝国那么严肃而呆板， 让人感觉心情愉悦。</p> <p>不过令小王子感到不可思议的是， 这里竟然没有官方提供的类库!   人们干活用的工具五花八门，让人眼花缭乱， 什么AngularJS, React , Backbone，Vue, Ember，JQuery, ......   互相之间还吵来吵去，争来争去，煞是热闹。</p> <p>对比这下，Java帝国有着严密的统治，有着官方提供的庞大类库， 还有一统天下的Web框架 SSH/SSM ，再加上各种各样的Java规范， 码农们只需要拿来学习，干活就行。
没有了选择的烦恼， 但同时也减少了选择的权利， 是好还是坏？  小王子自己也不知道。</p> <p>小王子还注意到Javascript王国的人写程序几乎没人使用IDE， 找个趁手的文本编辑器就可以开工， 然后扔到浏览器中去运行测试，真是轻量级啊！  唉， 我们Java帝国还在争论IntelliJ IDEA和Eclipse孰优孰劣,   实在是没有必要啊。</p> <h3 id="没有类怎么创建对象？"><a href="#没有类怎么创建对象？" aria-hidden="true" class="header-anchor">#</a> 没有类怎么创建对象？</h3> <p>随着调查的深入，小王子愈发觉得吃惊， 这里竟然没有类的概念！  一个面向对象的语言竟然没有类！ 这和小王子从出生就被灌输的概念可是背道而驰！</p> <p>没有类怎么创建对象 ？ 小时候宫廷老师经常说： 先写一个类， 然后才能从这个类new出一个对象出来 。</p> <p>可是眼前却有着无数的javascript对象， 他们在不断地产生、消亡，一起辛苦地工作，支撑起庞大的、生机勃勃的帝国。</p> <p>这些对象是从哪里来的？  小王子百思不得其解， 正值正午时分， 小王子看到前面有一家JSON酒馆，决定先歇歇脚，美美地吃一顿再说。</p> <p>小王子要了二斤熟牛肉，三碗酒，正要开始享用， 只听到旁边桌子的一个穿着长袍的人问道：哎，你说的那个对象的原型是什么？</p> <p>另一位戴眼镜的则低声说：嘘，噤声，国王刚颁布命令，原型法是我们帝国的秘密，禁止公开讨论，以防被Java帝国给学了去。</p> <p>小王子心中一动， 马上把小二叫来，要来上等酒菜， 送到邻桌，请两位吃酒。 一番酒喝下来， 小王子终于获得了两人的初步信任， 原来他们还是负责审查javscript语言规范的官员。</p> <p>小王子问道： “我家世代经商， 走南闯北，去过C++王国，Java帝国， C#帝国， 他们都是号称面向对象的语言， 都有class 和 object的区分， 可是到了咱们javascript王国， 我怎么连一个class 都没有看到啊？ ”</p> <p>戴眼镜的官员说： “我们不用class， 那玩意儿太不直观了 ！”</p> <p>小王子暗暗称奇， 可是仔细一想， 好像就是这样啊， 想当初我学习Java的时候， 费了好大的劲才接受了class这个概念，实际上面向对象的系统，不就是对象之间的交互吗？ 要类干什么？</p> <p>然后小王子问了一个关键问题： “没有class, 怎么创建对象啊”</p> <p>“外乡人， 没那么复杂，你想想什么是对象啊，不就是属性加上方法吗？　你看看我们这就创建一个对象出来 ”  这位官员说着，手指头沾着酒水在桌子上写了起来：</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYn2QyPyibHKPqZQrqGstfgibeYLnOBDL0qr25pDTbA7gK41jib13nYqYQUA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image"></p> <p>看到没有，这个animal对象定义了一个属性name, 和一个方法 eat , 简单吧？”</p> <p>的确是简单又明了，完全不需要class， 一个对象就创建了，小王子面前似乎打开了一扇新的大门。</p> <p>“由于对象并不和类关联， 我们可以随意地给这个对象增加属性：” 眼镜官员补充到。</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYnbDYNgO961PzMibwvmCFRPPQG1IjtWTOuLIkiacpBJBS1c5ibQOMIqDGgw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image"></p> <p>“还能这么玩？！” 小王子被惊到了，没有类的约束，这些对象也太自由了吧。</p> <h3 id="没有类怎么继承？"><a href="#没有类怎么继承？" aria-hidden="true" class="header-anchor">#</a> 没有类怎么继承？</h3> <p>那继承怎么实现， 继承可是面向对象的重要概念啊”</p> <p>眼镜官员说： “简单啊，继承不就是让两个对象建立关联嘛！  在我们javascript王国，每个对象都有一个特殊的属性叫做<code>__proto__</code>， 你可以用这个属性去关联另外一个对象（这个对象就是所谓的原型了） ， 来我给你画一下”</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYnd4ySJknlM8PuUXUlmA6J1uNHw70qCkbiaibqrV7s9ZwP4W7vMeNS7xIQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="imgage"></p> <p>这段酒水写成的代码不长，但是却深深地震撼了小王子， 因为其中信息量非常巨大，隐藏了“原型”的秘密， 小王子不由得陷入了深思：</p> <p>对象dog 的原型是animal (注意：也是一个对象)，  对象cat的原型也是animal 。</p> <p>无论是dog还是cat ，都没有定义eat()方法， 那怎么可以调用呢？</p> <p>当eat方法被调用的时候，先在自己的方法列表中寻找， 如果找不到，就去找原型中的方法， 如果原型中找不到， 就去原型的原型中去寻找......   最后找到Object那里， 如果还找不到， 那就是未定义了。</p> <p>这里的这几个对象肯定是通过<code>__proto__</code>建立了一个原型链！</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYnGZBptoCLZCzowGyVV1bLcrpXxf9r0K58icd2YhmUP4AW50hCwWqcXibQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image"></p> <p>嗯， 我师父给我讲JVM虚拟机的时候， 也提到了一个对象在执行方法的时候，需要查找方法的定义，这个查找的次序也是先从本对象所属的类开始， 然后父类， 然后父类的父类...... 直到Object,  思路是一模一样的！</p> <p>只不过Java 的方法定义是在class中， 而这个javascript 的方法就在对象里边， 现在我觉得似乎在对象里更加直观一点啊。</p> <p>属性和方法应该类似，也是沿着原型链向上查找， 不过这里dog的name属性似乎覆盖了animal的name属性， 还有那个this, 在调用dog.eat()的时候，应该是指向dog这个对象的。</p> <p>看来面向对象的理念都是想通的啊。 想着想着，小王子脸上竟然露出了笑容。</p> <p>看到小王子像程序卡住一样，不动了，  穿长袍的官员推了小王子一把： 外乡人， 你怎么了？</p> <p>小王子意识到自己的失态， 赶紧说： “哦，没啥， 我觉得你们使用的这个’原型‘的办法很精妙啊， 完全不用类就实现了继承。”</p> <p>眼镜官员一愣： “外乡人， 看来你悟性不错， 帝国的秘密已经被你给洞察了， 不过很多新来的程序员就不容易体会到这一点， 于是我们就做了一个变通， 让javascript可以像Java那样new 出对象出来。说来惭愧， 这完全是为了迁就那些C++,Java, C#程序员啊 ”</p> <h3 id="向java靠拢"><a href="#向java靠拢" aria-hidden="true" class="header-anchor">#</a> 向Java靠拢</h3> <p>小王子说：”什么变通办法？ 难道你们也开始使用类了吗？“</p> <p>“不不， 我们提供了一个叫做构造函数的东西。还是给你写点儿代码吧 ”  官员说着，又蘸着酒水写了起来：</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYn0gbBx9zNaY8ibLia8t5CHyyiaKBHOfiayCzLJn3ia19xsrCpeOrk3ujh53Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image"></p> <p>小王子说道： “那个function 已经有点 class的感觉了啊,  天呐我竟然看到了this这个关键字， 对了那个Student是你故意写的大写吗？ ”</p> <p>“是啊 ， 这样以来看起来就像Java的类了。但是，中间有个问题，你看出来了吗？ ”</p> <p>小王子想了一阵：“ 是不是说每个新创建对象都有一个sayHello函数？ 在Java中函数都是定义在class 上的。 如果定义对象上， 那就意味着每个对象都有一份， 太浪费了。”</p> <p>“是的，所以我们得提供一种更加高效的办法， 把这个sayHello函数放到另外一个地方去！ ”</p> <p>“放到哪里？ ”</p> <p>“记得我们刚才说的原型链吗？  当一个对象调用方法的时候，会顺着链向上找，所以我们可以创建一个原型对象，其中包含sayHello函数，  让andy, lisa这些从Student创建起来的对象指向这个原型就ok了。”</p> <p>“可是你这里只有构造函数Student,  在哪里创建原型对象呢？  怎么把andy,lisa 这些对象的<code>__proto__</code>指向原型对象呢？ 不会让我手工来指定吧。”</p> <p>眼镜官员瞪了一眼小王子说： “我们javascript帝国肯定不会这么麻烦程序员的， 我们可以把这个原型对象放到Student.prototype这个属性中（注意，不是<code>__proto__</code>）， 这样一来，每次当你创建andy,lisa这样的对象时， javascript 就会自动的把原型链给建立起来！”</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYnjbkEq7Zkp9ed2xZPdhw44mRDiav2MBeVhCxItb2c2g3KdGaFiaU0U11g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image"></p> <p>小王子面露难色：“唉，这理解起来有点难啊。”</p> <p>&quot;还是画个图吧， 当你去new Student的时候，javascript会建立这样的关系链：&quot;</p> <p><img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYnOxaITIgqqTAQZHtuiaqOnrT7GeCukG8U3jJzCej0MSfcQEvsaiaRw6pw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image"></p> <p>小王子说： “明白了，这个所谓的构造函数Student 其实就是一个幌子啊， 每次去new Student的时候，确实会创建一个对象出来（andy或者lisa) ， 并且把这个对象的原型(<code>__proto__</code>)指向 Student.prototype这个对象，这样一来就能找到sayHello()方法了。”</p> <p>眼镜官员回答：“没错，这个地方容易让人混淆的就是__proto__和prototype这两个属性， 唉，我也不知道最早为什么这么干， 实在是不优雅。”</p> <p>“是啊，这个构造函数再加上prototype的概念，实在是让人费解， 所以我们商量着提供一点语法糖降低程序员的负担。”   长袍官员附和到。</p> <h3 id="语法糖"><a href="#语法糖" aria-hidden="true" class="header-anchor">#</a> 语法糖</h3> <p>听到语法糖，小王子觉的很亲切， 因为Java 中也提供了很多方便程序员的语法糖。</p> <p>当长袍官员写出javascript的语法糖的时候， 小王子不由得大吃一惊：
<img src="http://mmbiz.qpic.cn/mmbiz_png/KyXfCrME6ULNsLZbiaoLXPeaB05FyJPYnGYuZIfJdjRJBPscHibygQl2DbwIeOaGIjxic2gWGzeu7ictM5PGp9dRUQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="image">
这语法糖已经把javascript变得非常像Java, C#，C++的类了， 看来javascript帝国为了“讨好”程序员， 已经努力的在改变了， 我们java帝国看来得加油啊。</p> <p>小王子现在明白了Javascript是一个基于原型实现的面向对象的语言， 根本没有类的概念， 新的方式给小王子的思维观念带来了重大的冲击。</p> <p>在这里待久了，他又了解到javascript强大的函数式编程，越来越喜欢javascript, 都有点乐不思蜀了。</p> <p>小王子还会回到Java帝国吗？</p> <h2 id="原型链"><a href="#原型链" aria-hidden="true" class="header-anchor">#</a> 原型链</h2> <h3 id="prototype和-proto-的区别"><a href="#prototype和-proto-的区别" aria-hidden="true" class="header-anchor">#</a> prototype和__proto__的区别</h3> <p><img src="https://images2015.cnblogs.com/blog/787416/201603/787416-20160323103557261-114570044.png" alt="image"></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Object {}</span>

<span class="token keyword">var</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//b {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//function() {}</span>
</code></pre></div><p><img src="https://images2015.cnblogs.com/blog/787416/201603/787416-20160323103622089-1134417169.png" alt="image"></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/*1、字面量方式*/</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Object {}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> a<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token comment">/*2、构造器方式*/</span>
<span class="token keyword">var</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//A {}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> a<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token comment">/*3、Object.create()方式*/</span>
<span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> a2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Object {a: 1}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> a<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false（此处即为图1中的例外情况）</span>
</code></pre></div><p><img src="https://images2015.cnblogs.com/blog/787416/201603/787416-20160322110905589-2039017350.png" alt="image"></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//A {}（即构造器function A 的原型对象）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Object {}（即构造器function Object 的原型对象）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//null</span>
</code></pre></div><h2 id="实例属性方法、静态属性方法、原型属性方法"><a href="#实例属性方法、静态属性方法、原型属性方法" aria-hidden="true" class="header-anchor">#</a> 实例属性方法、静态属性方法、原型属性方法</h2> <h3 id="实例属性方法"><a href="#实例属性方法" aria-hidden="true" class="header-anchor">#</a> 实例属性方法</h3> <p>都是绑定在将来通过构造函数创建的实例上，并且需要通过这个实例来访问的属性、方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 实例属性 </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token comment">// 实例方法</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'吃饭'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 通过构造函数创建出实例p</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;梁非凡&quot;</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>
<span class="token comment">// 通过实例p去访问实例属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 梁非凡</span>
<span class="token comment">// 通过实例p去访问实例方法</span>
p<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 梁非凡吃饭</span>
</code></pre></div><h3 id="静态属性方法"><a href="#静态属性方法" aria-hidden="true" class="header-anchor">#</a> 静态属性方法</h3> <p>绑定在构造函数上的属性方法，需要通过构造函数访问</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 比如我们想取出这个Person构造函数创建了多少个实例</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Person<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Person<span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  Person<span class="token punctuation">.</span>total<span class="token operator">++</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'梁非凡'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'比利'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token comment">// 2</span>

</code></pre></div><h3 id="原型属性方法"><a href="#原型属性方法" aria-hidden="true" class="header-anchor">#</a> 原型属性方法</h3> <p>构造函数new出来的实例，都共享这个构造函数的原型对象上的属性方法，类似共享库</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;梁非凡&quot;</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;比利&quot;</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>eat <span class="token operator">===</span> p2<span class="token punctuation">.</span>eat<span class="token punctuation">)</span> <span class="token comment">// fasle</span>
</code></pre></div><p>从上面可以得出，p1和p2的eat方法，行为是一致的，但是他们却不等，是因为他们不同在一个堆区，如果只有1、2个实例还好，如果大量的实例，那么会大量生成这种原本可以复用共用的属性方法，非常耗费性能，不利于复用，此时我们就需要一个类似共享库的对象，让实例能够沿着原型链，去找。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>eat <span class="token operator">=</span> <span class="token function">functoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 通过构造函数Person的prototype属性找到Person的原型对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;梁非凡&quot;</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;比利&quot;</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>eat <span class="token operator">===</span> p2<span class="token punctuation">.</span>eat<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>这样可以增加复用性，但是还存在一个问题，如果我们要给原型对象添加大量属性方法时，我们不断的Person.prototype.xxx = xxx、Person.prototype.xxxx = xxxx，这样也是很繁琐，那么我们该怎么解决这个问题？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token comment">// 让Person.prototype指针指向一个新的对象</span>
Person<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    eat<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    sleep<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'睡觉'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/9/1/16595c009f667055?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h3 id="如何找到原型对象"><a href="#如何找到原型对象" aria-hidden="true" class="header-anchor">#</a> 如何找到原型对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    eat<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    sleep<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'睡觉'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'梁非凡'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span>
<span class="token comment">// 访问原型对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// __proto__仅用于测试，不能写在正式代码中</span>
</code></pre></div><h3 id="和原型对象有关几个常用方法"><a href="#和原型对象有关几个常用方法" aria-hidden="true" class="header-anchor">#</a> 和原型对象有关几个常用方法</h3> <h4 id="hasownproperty"><a href="#hasownproperty" aria-hidden="true" class="header-anchor">#</a> hasOwnProperty</h4> <p>在对象自身查找属性而不到原型上查找</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1.hasOwnProperty 在对象自身查找属性而不到原型上查找</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'梁非凡'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token string">'name'</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> p<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// name仅在p对象中</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="isprototypeof"><a href="#isprototypeof" aria-hidden="true" class="header-anchor">#</a> isPrototypeOf</h4> <p>判断一个对象是否是某个实例的原型对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 2.isPrototypeOf 判断一个对象是否是某个实例的原型对象</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'梁非凡'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> Person<span class="token punctuation">.</span>prototype 
obj<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="object-getprototypeof"><a href="#object-getprototypeof" aria-hidden="true" class="header-anchor">#</a> Object.getPrototypeOf</h4> <p>该方法与 setPrototypeOf方法配套，用于读取一个对象的 prototype 对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> rec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>rec<span class="token punctuation">)</span> <span class="token operator">===</span> Rectangle<span class="token punctuation">.</span>prototype
<span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>rec<span class="token punctuation">)</span> <span class="token operator">===</span> Rectangle<span class="token punctuation">.</span>prototype

</code></pre></div><h4 id="object-setprototypeof"><a href="#object-setprototypeof" aria-hidden="true" class="header-anchor">#</a> Object.setPrototypeOf</h4> <p>Object.setPrototypeOf方法的作用与__proto__相同，用来设置一个对象的prototype对象。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//  用法</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//该方法等同于下面的函数。</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> proto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto<span class="token punctuation">;</span>
	<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="更改原型对象constructor指针"><a href="#更改原型对象constructor指针" aria-hidden="true" class="header-anchor">#</a> 更改原型对象constructor指针</h3> <p>原型对象默认是有一个指针constructor指向其构造函数的，</p> <p>如果我们把构造函数的原型对象，替换成另外一个原型对象，那么这个新的原型</p> <p>对象的constructor则不是指向该构造函数，会导致类型判断的错误</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'梁非凡'</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// 把Person构造函数的原型对象替换成该对象</span>
    eat<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// Object</span>

<span class="token comment">// 我们发现，该原型对象的constructor指向的是Object而不是Person</span>
<span class="token comment">// 那么我们现在解决一下这个问题，把原型对象的constructor指向到Person</span>
Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Person
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// Person</span>
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/9/1/16595a8638a2e1a1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h2 id="new的本质"><a href="#new的本质" aria-hidden="true" class="header-anchor">#</a> New的本质</h2> <h3 id="执行过程"><a href="#执行过程" aria-hidden="true" class="header-anchor">#</a> 执行过程</h3> <ol><li>使用new这个关键词来创建对象</li> <li>在构造函数内部把新创建出来的对象赋予给this</li> <li>在构造函数内部把新创建（将来new的对象）的属性方法绑到this上</li> <li>默认是返回新创建的对象，特别需要注意的是如果显式return一个对象数据类型，那么将来new的对象，就是显式return的对象</li></ol> <h3 id="初步实现"><a href="#初步实现" aria-hidden="true" class="header-anchor">#</a> 初步实现</h3> <p>分析：
因为 new 的结果是一个新对象，所以在模拟实现的时候，我们也要建立一个新对象，假设这个对象叫 obj，因为 obj 会具有 Otaku 构造函数里的属性，想想经典继承的例子，我们可以使用 Otaku.apply(obj, arguments)来给 obj 添加新的属性。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">objectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  Constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shift<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Constructor<span class="token punctuation">.</span>prototype
  Constructor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
  <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>
</code></pre></div><p>在这一版中，我们：
1.用new Object() 的方式新建了一个对象 obj</p> <p>2.取出第一个参数，就是我们要传入的构造函数。此外因为 shift 会修改原数组，所以 arguments
会被去除第一个参数</p> <p>3.将 obj 的原型指向构造函数，这样 obj 就可以访问到构造函数原型中的属性</p> <p>4.使用 apply，改变构造函数 this 的指向到新建的对象，这样 obj 就可以访问到构造函数中的属性</p> <p>5.返回 obj</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Otaku</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>habit <span class="token operator">=</span> <span class="token string">'Games'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Otaku<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>strength <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>

Otaku<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayYourName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">objectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shift<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    Constructor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token function">objectFactory</span><span class="token punctuation">(</span>Otaku<span class="token punctuation">,</span> <span class="token string">'Kevin'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Kevin</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>habit<span class="token punctuation">)</span> <span class="token comment">// Games</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>strength<span class="token punctuation">)</span> <span class="token comment">// 60</span>

person<span class="token punctuation">.</span><span class="token function">sayYourName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I am Kevin</span>
</code></pre></div><h3 id="返回值效果实现"><a href="#返回值效果实现" aria-hidden="true" class="header-anchor">#</a> 返回值效果实现</h3> <p>接下来我们再来看一种情况，假如构造函数有返回值，举个例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Otaku</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>strength <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
        habit<span class="token punctuation">:</span> <span class="token string">'Games'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Otaku</span><span class="token punctuation">(</span><span class="token string">'Kevin'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Kevin</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>habit<span class="token punctuation">)</span> <span class="token comment">// Games</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>strength<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre></div><p>结果完全颠倒过来，这次尽管有返回值，但是相当于没有返回值进行处理。
所以我们还需要判断返回的值是不是一个对象，如果是一个对象，我们就返回这个对象，如果没有，我们该返回什么就返回什么。
再来看第二版的代码，也是最后一版的代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 第二版的代码</span>
<span class="token keyword">function</span> <span class="token function">objectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shift<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">var</span> ret <span class="token operator">=</span> Constructor<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> ret <span class="token punctuation">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="继承"><a href="#继承" aria-hidden="true" class="header-anchor">#</a> 继承</h2> <p>原文 <a href="https://juejin.im/post/5b8a8724f265da435450c591" target="_blank" rel="noopener noreferrer">小邵教你玩转JS面向对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
面向对象的继承方式有很多种，原型链继承、借用构造函数继承、组合继承、原型式继承、寄生式继承、寄生式组合继承、深拷贝继承等等。</p> <h3 id="原型链继承"><a href="#原型链继承" aria-hidden="true" class="header-anchor">#</a> 原型链继承</h3> <p>利用原型链的特性，当在自身找不到时，会沿着原型链往上找。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'邵威儒'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'旺财'</span><span class="token punctuation">,</span><span class="token string">'小黄'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token string">&quot;030578000&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// '030578000'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
</code></pre></div><p>从上面我们可以看到，Student没有继承Person，此时它们之间的联系是这样的。
<img src="https://user-gold-cdn.xitu.io/2018/9/1/16595d7ba55805e9?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image">
既然要让实例student访问到Person的原型对象属性方法，我们会想到，把Student.prototype改写为Person.prototype</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'邵威儒'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'旺财'</span><span class="token punctuation">,</span><span class="token string">'小黄'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token string">&quot;030578000&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// * 改写Student.prototype指针指向</span>
Student<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Person<span class="token punctuation">.</span>prototype

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// '030578000'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// * '吃饭'</span>
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/9/2/16597ab31fa9133d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <p>现在修改了Student.prototype指针指向为Person.prototype后，可以访问Person.prototype上的eat方法，但是student还不能继承Person.name和Person.pets，那我会想到，是Person的实例，才会同时拥有实例属性方法和原型属性方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'邵威儒'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'旺财'</span><span class="token punctuation">,</span><span class="token string">'小黄'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token string">&quot;030578000&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// * new一个Person的实例，同时拥有其实例属性方法和原型属性方法</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// * 把Student的原型对象指向实例p</span>
Student<span class="token punctuation">.</span>prototype <span class="token operator">=</span> p

<span class="token comment">// * 把Student的原型对象的constructor指向Student，解决类型判断问题</span>
Student<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// '030578000'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// * '邵威儒'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * '[ '旺财', '小黄' ]'</span>
student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '吃饭'</span>
</code></pre></div><p>因为实例p是由Person构造函数实例化出来的，所以同时拥有其实例属性方法和原型属性方法，并且把这个实例p作为Student的原型对象，此时的关系图如下
<img src="https://user-gold-cdn.xitu.io/2018/9/2/16597b8c42bb29c0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image">
这种称为原型链继承，到此为止原型链继承就结束了</p> <h3 id="借助构造函数继承"><a href="#借助构造函数继承" aria-hidden="true" class="header-anchor">#</a> 借助构造函数继承</h3> <p>通过这样的方式，会有一个问题，原型对象类似一个共享库，所有实例共享原型对象同一个属性方法，如果原型对象上有引用类型，那么会被所有实例共享，也就是某个实例更改了，则会影响其他实例，我们可以看一下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'邵威儒'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'旺财'</span><span class="token punctuation">,</span><span class="token string">'小黄'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token string">&quot;030578000&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Student<span class="token punctuation">.</span>prototype <span class="token operator">=</span> p
Student<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// * new多一个实例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// '030578000'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '邵威儒'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// '[ '旺财', '小黄' ]'</span>
student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '吃饭'</span>

<span class="token comment">// 此时我们修改某一个实例，pets是原型对象上的引用类型 数组</span>
student<span class="token punctuation">.</span>pets<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * [ '旺财', '小黄', '小红' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * [ '旺财', '小黄', '小红' ]</span>
</code></pre></div><p>从上面可以看出，student的pets（实际就是原型对象上的pets）被修改后，相关的实例student2也会受到影响。
那么我们能不能把Person上的属性方法，添加到Student上呢？以防都存在原型对象上，会被所有实例共享，特别是引用类型的修改，会影响所有相关实例。
可以利用call来实现。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'邵威儒'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'旺财'</span><span class="token punctuation">,</span><span class="token string">'小黄'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Person<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// * 利用call调用Person上的属性方法拷贝一份到Student</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token string">&quot;030578000&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Student<span class="token punctuation">.</span>prototype <span class="token operator">=</span> p
Student<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// '030578000'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '邵威儒'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// '[ '旺财', '小黄' ]'</span>
student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '吃饭'</span>

<span class="token comment">// * 此时我们修改某一个实例，pets是原型对象上的引用类型 数组</span>
student<span class="token punctuation">.</span>pets<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * [ '旺财', '小黄', '小红' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * [ '旺财', '小黄' ]</span>

</code></pre></div><p>上面在子构造函数（Student）中利用call调用父构造函数（Person）的方式，叫做借助构造函数继承
结合上面所看，使用了原型链继承和借助构造函数继承，两者结合起来使用叫组合继承，关系图如下：
<img src="https://user-gold-cdn.xitu.io/2018/9/2/165980ad0dcdd682?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <p>那么还有个问题，当父构造函数需要接收参数时，怎么处理？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>pets<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// * 父构造函数接收name，pets参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment">// * 赋值到this上</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> pets <span class="token comment">// * 赋值到this上</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>name<span class="token punctuation">,</span>pets<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// * 在子构造函数中也接收参数</span>
    Person<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>pets<span class="token punctuation">)</span> <span class="token comment">// * 在这里把name和pets传参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num <span class="token comment">// * 赋值到this上</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Student<span class="token punctuation">.</span>prototype <span class="token operator">=</span> p
Student<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;030578000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;邵威儒&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;旺财&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;小黄&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;030578001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;iamswr&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;小红&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// '030578000'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '邵威儒'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// '[ '旺财', '小黄' ]'</span>
student<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '吃饭'</span>

student<span class="token punctuation">.</span>pets<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * [ '旺财', '小黄', '小红' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// * [ '小红' ]</span>

</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2018/9/2/16598168ba89fb31?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image">
这样我们就可以在子构造函数中给父构造函数传参了，而且我们也发现上图中，2个红圈的地方，代码是重复了，那么接下来我们怎么解决呢？
能否在子构造函数设置原型对象的时候，只要父构造函数的原型对象属性方法呢？
当然是可以的，接下来我们讲寄生式组合继承，也是目前程序猿认为解决继承问题最好的方案</p> <h3 id="寄生式组合继承"><a href="#寄生式组合继承" aria-hidden="true" class="header-anchor">#</a> 寄生式组合继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>pets<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>pets <span class="token operator">=</span> pets
<span class="token punctuation">}</span>

Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'吃饭'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>name<span class="token punctuation">,</span>pets<span class="token punctuation">)</span><span class="token punctuation">{</span> 
    Person<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>pets<span class="token punctuation">)</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num
<span class="token punctuation">}</span>

<span class="token comment">// * 寄生式继承</span>
<span class="token keyword">function</span> <span class="token function">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// * 声明一个空的构造函数，用于桥梁作用</span>
Temp<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Person<span class="token punctuation">.</span>prototype <span class="token comment">// * 把Temp构造函数的原型对象指向Person的原型对象</span>
<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// * 用构造函数Temp实例化一个实例temp</span>
Student<span class="token punctuation">.</span>prototype <span class="token operator">=</span> temp <span class="token comment">// * 把子构造函数的原型对象指向temp</span>
temp<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student <span class="token comment">// * 把temp的constructor指向Student</span>

<span class="token keyword">let</span> student1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'030578001'</span><span class="token punctuation">,</span><span class="token string">'邵威儒'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'旺财'</span><span class="token punctuation">,</span><span class="token string">'小黄'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span> <span class="token comment">// Student { name: '邵威儒', </span>
                                   pets<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token string">'小黄'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> 
                                   num<span class="token punctuation">:</span> <span class="token string">'030578001'</span> <span class="token punctuation">}</span>

<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'030578002'</span><span class="token punctuation">,</span><span class="token string">'iamswr'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'小红'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">)</span> <span class="token comment">// Student { name: 'iamswr',</span>
                                   pets<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'小红'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> 
                                   num<span class="token punctuation">:</span> <span class="token string">'030578002'</span> <span class="token punctuation">}</span>

</code></pre></div><p>至此为止，我们就完成了寄生式组合继承了，主要逻辑就是用一个空的构造函数，来当做桥梁，并且把其原型对象指向父构造函数的原型对象，并且实例化一个temp，temp会沿着这个原型链，去找到父构造函数的原型对象
<img src="https://user-gold-cdn.xitu.io/2018/9/2/165982b76386af89?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="image"></p> <h3 id="原型式继承"><a href="#原型式继承" aria-hidden="true" class="header-anchor">#</a> 原型式继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 原型式继承</span>
<span class="token keyword">function</span> <span class="token function">createObjWithObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// * 传入一个原型对象</span>
    <span class="token keyword">function</span> <span class="token function">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    Temp<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> o
<span class="token punctuation">}</span>

<span class="token comment">// * 把Person的原型对象当做temp的原型对象</span>
<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token function">createObjWithObj</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

<span class="token comment">// * 也可以使用Object.create实现</span>
<span class="token comment">// * 把Person的原型对象当做temp2的原型对象</span>
<span class="token keyword">let</span> temp2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre></div><h3 id="寄生式继承"><a href="#寄生式继承" aria-hidden="true" class="header-anchor">#</a> 寄生式继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 寄生式继承</span>
<span class="token comment">// 我们在原型式的基础上，希望给这个对象新增一些属性方法</span>
<span class="token comment">// 那么我们在原型式的基础上扩展</span>
<span class="token keyword">function</span> <span class="token function">createNewObjWithObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">createObjWithObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    o<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;邵威儒&quot;</span>
    o<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">28</span>
    <span class="token keyword">return</span> o
<span class="token punctuation">}</span>
</code></pre></div><h2 id="深拷贝继承"><a href="#深拷贝继承" aria-hidden="true" class="header-anchor">#</a> 深拷贝继承</h2> <h3 id="方法一"><a href="#方法一" aria-hidden="true" class="header-anchor">#</a> 方法一</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> swr <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">&quot;邵威儒&quot;</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span><span class="token number">28</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> swrcopy <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>swr<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>swrcopy<span class="token punctuation">)</span> <span class="token comment">// { name:&quot;邵威儒&quot;,age:28 }</span>
<span class="token comment">// 此时我们修改swr的属性</span>
swr<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>swr<span class="token punctuation">)</span> <span class="token comment">// { name:&quot;邵威儒&quot;,age:29 }</span>
<span class="token comment">// 但是swrcopy却不会受swr影响</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>swrcopy<span class="token punctuation">)</span> <span class="token comment">// { name:&quot;邵威儒&quot;,age:28 }</span>
<span class="token comment">// 这种方式进行深拷贝，只针对json数据这样的键值对有效</span>
<span class="token comment">// 对于函数等等反而无效，不好用，接着继续看方法二、三。</span>

</code></pre></div><h3 id="方法二"><a href="#方法二" aria-hidden="true" class="header-anchor">#</a> 方法二</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 方法二：</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>fromObj<span class="token punctuation">,</span>toObj<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 深拷贝函数</span>
  <span class="token comment">// 容错</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>fromObj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 当fromObj为null</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>fromObj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>fromObj<span class="token punctuation">)</span> <span class="token comment">// 当fromObj为正则</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>fromObj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>fromObj<span class="token punctuation">)</span> <span class="token comment">// 当fromObj为Date</span>

  toObj <span class="token operator">=</span> toObj <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> fromObj<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 遍历</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> fromObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 是否为对象</span>
      toObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> fromObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token comment">// 如果为原始数据类型，则直接赋值</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      toObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fromObj</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token comment">// 如果为object，则new这个object指向的构造函数</span>
      <span class="token function">deepCopy</span><span class="token punctuation">(</span>fromObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span>toObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 递归</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> toObj
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span><span class="token string">&quot;小白&quot;</span><span class="token punctuation">,</span>
  sex<span class="token punctuation">:</span><span class="token string">&quot;公&quot;</span><span class="token punctuation">,</span>
  firends<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span><span class="token string">&quot;小黄&quot;</span><span class="token punctuation">,</span>
      sex<span class="token punctuation">:</span><span class="token string">&quot;母&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dogcopy <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>
<span class="token comment">// 此时我们把dog的属性进行修改</span>
dog<span class="token punctuation">.</span>firends<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'公'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span> <span class="token comment">// { name: '小白',</span>
                      sex<span class="token punctuation">:</span> <span class="token string">'公'</span><span class="token punctuation">,</span>
                      firends<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'小黄'</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">'公'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">// 当我们打印dogcopy，会发现dogcopy不会受dog的影响</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dogcopy<span class="token punctuation">)</span> <span class="token comment">// { name: '小白',</span>
                          sex<span class="token punctuation">:</span> <span class="token string">'公'</span><span class="token punctuation">,</span>
                          firends<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'小黄'</span><span class="token punctuation">,</span> sex<span class="token punctuation">:</span> <span class="token string">'母'</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="方法3"><a href="#方法3" aria-hidden="true" class="header-anchor">#</a> 方法3</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 方法三：</span>
<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span><span class="token string">&quot;小白&quot;</span><span class="token punctuation">,</span>
  sex<span class="token punctuation">:</span><span class="token string">&quot;公&quot;</span><span class="token punctuation">,</span>
  firends<span class="token punctuation">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span><span class="token string">&quot;小黄&quot;</span><span class="token punctuation">,</span>
      sex<span class="token punctuation">:</span><span class="token string">&quot;母&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj
  <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newObj
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dogcopy <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span>
dog<span class="token punctuation">.</span>firends<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'公'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dogcopy<span class="token punctuation">)</span>
</code></pre></div><h2 id="总结-javascript万物起源"><a href="#总结-javascript万物起源" aria-hidden="true" class="header-anchor">#</a> 总结 javascript万物起源</h2> <p>出自 <a href="https://zhuanlan.zhihu.com/p/22989691" target="_blank" rel="noopener noreferrer">JavaScript 世界万物诞生记<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="https://pic2.zhimg.com/v2-52726a7f86690c0663452112d66836c5_1200x500.jpg" alt="image"></p> <h3 id="一-无中生有"><a href="#一-无中生有" aria-hidden="true" class="header-anchor">#</a> 一. 无中生有</h3> <p>起初，什么都没有。
造物主说：没有东西本身也是一种东西啊，于是就有了null：
<img src="https://pic2.zhimg.com/80/v2-11ae989e2db3a380ffe225e382652671_hd.png" alt="image">
现在我们要造点儿东西出来。但是没有原料怎么办？
有一个声音说：不是有null嘛？
另一个声音说：可是null代表无啊。
造物主说：那就无中生有吧！
于是：
<img src="https://pic2.zhimg.com/80/v2-4305232695aafb0ffb3df63caec39dd1_hd.png" alt="image">
JavaScript中的1号对象产生了，不妨把它叫做No. 1。
这个No. 1对象可不得了，它是真正的万物始祖。它拥有的性质，是所有的对象都有的。
<code>__proto__</code>是什么呢？是“生”的意思，或者叫做继承。</p> <h3 id="二-制造对象的机器"><a href="#二-制造对象的机器" aria-hidden="true" class="header-anchor">#</a> 二. 制造对象的机器</h3> <p>既然已经有了一个对象，剩下就好办了，因为一生二，二生三，三生万物嘛。
不过造物主很懒，他不想一个一个地亲手制造对象。于是他做了一台能够制造对象的机器：</p> <p><img src="https://pic1.zhimg.com/80/v2-2458a871bafadca8b0551e2252d69fec_hd.png" alt="image"></p> <p>他给这台机器起了一个名字：Object。
这台机器并不能凭空造出对象，它需要一个模板对象，按照这个模板对象来制造对象。很自然的，它把目前仅有的No. 1对象作为模板。图中的prototype就代表机器的模板对象。
机器如何启动呢？通过new命令。你对着机器喊一声：“new！”，对象就造出来了。</p> <p>机器的产生，实现了对象的批量化自动化生产，解放了造物主的双手。于是造物主忙别的去了。
如果机器只是按照模板的样子，机械地复制出一模一样的对象，那就太笨了。
人类的后代在继承了父辈的性状的基础上，可以产生父辈没有的性状。同样地，机器在制造对象时，除了继承模板对象的属性外，还可以添加新的属性。这使得JavaScript世界越来越多样化。</p> <p>比如说，有一天Object机器制造一个对象，它有一个特殊的属性，叫做flag，属性值是10。用图形表示是这样的：</p> <p><img src="https://pic4.zhimg.com/80/v2-6d345dec589e84311315a3decaa21d8b_hd.png" alt="image">
写成代码就是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span> flag<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="三-更多制造对象的机器"><a href="#三-更多制造对象的机器" aria-hidden="true" class="header-anchor">#</a> 三. 更多制造对象的机器</h3> <p>一天天过去了，造物主来视察工作。看到Object制造出了好多好多对象，他非常高兴。
同时他还发现：根据“物以类聚”的原则，这些对象可以分成很多类。聪明的造物主想，我何不多造几台机器，让每一台机器专门负责制造某一类对象呢？于是，他动手造出了几台机器并给它们起了名字。它们分别是：</p> <p><strong>String</strong>：用来制造表示一段文本的对象。
<strong>Number</strong>：用来制造表示一个数字的对象。
<strong>Boolean</strong>：用来制造表示是与非的对象。
<strong>Array</strong>：用来制造有序队列对象。
<strong>Date</strong>：用来制造表示一个日期的对象。
<strong>Error</strong>：用来制造表示一个错误的对象。
……</p> <p>多台机器齐开动，各司其责，造物运动进入了一个新的阶段……</p> <p>造物主又开始思考了：虽然机器是用来制造对象的，但是机器本身实际上也是一种特殊对象啊。现在有了这么多机器，我得好好总结一下它们的共同特征，把它们也纳入对象体系。</p> <p>于是，造物主基于No. 1对象，造出了一个No. 2对象，用它来表示所有机器的共同特征。换句话说，把它作为所有机器的原型对象。</p> <p><img src="https://pic3.zhimg.com/80/v2-b6cbde61439e841e4c6353d3546fc482_hd.png" alt="image">
（注：<code>__proto__</code>写起来太麻烦了，后面我们用[p]来代替）</p> <p>当然了，和Object一样，这些机器也需要各自有一个模板对象，也就是它们的prototype属性指向的那个对象。显然它们的模板对象应该是继承自No. 1对象的，即</p> <p><img src="https://pic2.zhimg.com/80/v2-34ab309d1e2e415071afd1c19f216275_hd.png" alt="image"></p> <p>这张图显示了JavaScript世界中那些最基本的机器本身的原型链，以及它们的模板对象的原型链。不过看起来太复杂了，所以后面我们就不再把它们完整地画出来了。</p> <h3 id="四-制造机器的机器"><a href="#四-制造机器的机器" aria-hidden="true" class="header-anchor">#</a> 四. 制造机器的机器</h3> <p>造物主高兴地想：这下可好了，我造出了Object机器，实现了对象制造的自动化。然后又造出了String、Number等机器，实现了特定类别的对象制造的自动化。但是，为啥总感觉似乎还缺点什么呢？</p> <p>对啦，还缺少一台制造机器的机器啊！</p> <p>很快，万能的造物主就把它造了出来，并把它命名为Function。有了Function机器后，就可以实现自动化地制造机器了。</p> <p>让我们来观察一下Function：
首先，Function是一台机器，所以它的原型对象也是No. 2对象。
其次，Function又是一台制造机器的机器，所以它的模板对象也是No. 2对象。
所以我们得到了Function的一个非常特别的性质：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Function<span class="token punctuation">.</span>prototype
</code></pre></div><p>哇，太奇妙了！</p> <p>不要奇怪，这个性质不过是”Function是一台制造机器的机器“这个事实的必然结果。</p> <p>于是JavaScript的世界的变成了下面的样子：</p> <p><img src="https://pic1.zhimg.com/80/v2-1b90d4ec60713acce99df0c498fff794_hd.png" alt="image"></p> <p>从这张图中，我们发现：所有的函数(包括Function)的原型都是No. 2对象，而同时Function.prototype也是No. 2对象。这说明了：</p> <blockquote><p>从逻辑上，我们可以认为所有机器(包括Function自己)都是由Function制造出来的</p></blockquote> <p>同时，如果再仔细瞧瞧，你会发现：</p> <blockquote><p>Object作为一个机器可以看做是有由Function制造出来的，而Function作为一个对象可以看做是由Object制造出来的。</p></blockquote> <p>这就是JavaScript世界的“鸡生蛋，蛋生鸡”问题。那么到底是谁生了谁呢？Whatever！</p> <h3 id="五-让世界动起来"><a href="#五-让世界动起来" aria-hidden="true" class="header-anchor">#</a> 五. 让世界动起来</h3> <p>就像前面所说，机器用来制造某一类对象。正因如此，机器可以作为这类对象的标志，即面向对象语言中类(class)的概念。所以机器又被称为构造函数。在ES6引入class关键字之前，我们常常把构造函数叫做类。</p> <p>然而，除了作为构造函数来制造对象外，函数通常还有另一个功能：做一件事情。正是有了这个功能，JavaScript的世界才由静变动，变得生机勃勃。</p> <p>比如说，我们现在用Function机器制造了鸟类(即用来造鸟的机器)：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Bird</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后，对着造鸟机说：“new！”，于是造鸟机发动起来，制造一个红色的鸟：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> redBird <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bird</span><span class="token punctuation">(</span><span class="token string">'#FF0000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果现在我们想让鸟飞起来，该怎么办呢？我们需要再次用Function制造出一台机器，不过这台机器不是用来制造对象的，而是用来做事儿的，即“让鸟飞起来”这件事情：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 这是一台通过晃动鸟的翅膀，让鸟飞起来的简陋的机器。</span>
<span class="token keyword">function</span> <span class="token function">makeBirdFly</span><span class="token punctuation">(</span>bird<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">shakeBirdWing</span><span class="token punctuation">(</span>bird<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们知道，让一台制造对象的机器发动，只需要对它喊“new”即可；那么怎样让一台做事情的机器发动呢？更简单，对它咳嗽一声就行了。咳咳咳，</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">makeBirdFly</span><span class="token punctuation">(</span>redBird<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>于是红鸟飞了起来，世界充满了生机。</p> <p>从上面的Bird和makeBirdFly的定义可以看出：实际上，制造对象的机器和做事情的机器没什么明显区别，不同的只是它们的使用方式。在两种情况下，它们分别被叫做构造函数和普通函数。</p> <p>说明1：function xxx语法可以看成new Function的等价形式。
说明2：用户自定义的函数通常既可以作为普通函数使用，又可以作为构造函数来制造对象。ES6新增的class语法定义的函数只能作为构造函数，ES6新增的=&gt;语法定义的箭头函数只能作为普通函数。</p> <h3 id="六-让世界立体起来"><a href="#六-让世界立体起来" aria-hidden="true" class="header-anchor">#</a> 六. 让世界立体起来</h3> <p>造物主对目前的世界还是不太满意，因为几乎所有的机器的模板对象都是No. 2，这使得JavaScript世界看起来有点扁。</p> <p>于是造物主再次研究世界万物的分类问题。他发现有些对象会动、还会吃东西，于是把它们叫做动物，然后造了一台Animal机器来制造它们。他进一步发现，即使都是动物，也还是可以进一步分类，比如有些会飞、有些会游，他分别把它们叫做鸟类、鱼类。于是他想，我何不单独造几台机器，专门用来制造某一类动物呢。于是它造出了Bird、Fish等机器。</p> <p>接下来，在选择这些机器的模板对象时碰到一个问题：如果还像之前那样直接复制一个No. 1对象作为Bird、Fish的模板，那么结果就是这样的：</p> <p><img src="https://pic1.zhimg.com/80/v2-f3ef45a4e9402b4dda44132cde989b34_hd.png" alt="image">
这样可不好。首先没体现出鸟类、鱼类跟动物的关系，其次它们的模板对象存了重复的东西，这可是一种浪费啊。怎么办呢？简单，让Bird和Fish的模板对象继承自Animal的模板对象就好了。就是说</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Bird<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Animal<span class="token punctuation">.</span>prototype
Fish<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Animal<span class="token punctuation">.</span>prototype
</code></pre></div><p><img src="https://pic1.zhimg.com/80/v2-2d659369503dba1cb92e682a540e0e70_hd.png" alt="image"></p> <p>用同样的方法，造物主造出了一个立体得多的JavaScript世界。
然而这样还不够。虽然那些纯对象现在充满了层次感，但是那些机器对象之间的关系还是扁平的</p> <p><img src="https://pic4.zhimg.com/80/v2-6644774193179923f2d403378bc67317_hd.png" alt="image">
那又该怎么办呢？其实用类似的办法就行了：</p> <p><img src="https://pic4.zhimg.com/80/v2-d99bca010604438e4101c58534aea24b_hd.png" alt="image">
为了更方便地做到这一点，造物主发明了class关键字。</p> <h3 id="七-世界最终的样子"><a href="#七-世界最终的样子" aria-hidden="true" class="header-anchor">#</a> 七. 世界最终的样子</h3> <p>经过一番折腾，JavaScript世界发生了大变化。变得丰富多彩，同时变得很复杂。用一张图再也没法画出它的全貌，只能画出冰山一角：</p> <p><img src="https://pic1.zhimg.com/80/v2-2860797f5b29eb118bb4e55e802a09b4_hd.png" alt="image"></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Blog/knowledge/js/3.this.html" class="prev">
          this
        </a></span> <span class="next"><a href="/Blog/knowledge/js/5.async.html">
          异步
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/Blog/assets/js/app.617ab371.js" defer></script><script src="/Blog/assets/js/16.938c6039.js" defer></script>
  </body>
</html>
